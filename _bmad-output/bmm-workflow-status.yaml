# BMM Workflow Status - OncallsV31
# Generated by BMad Master via workflow-init
# Track progress: /bmad:bmm:workflows:workflow-status

generated: "2025-12-19"
project: "OncallsV31"
project_type: "Medical On-Call Scheduling Platform"
selected_track: "method"
field_type: "brownfield"
workflow_path: "method-brownfield"

# User selections from workflow-init
discovery_selections:
  brainstorm_requested: false
  research_requested: true
  product_brief_requested: false

# Workflow Status Tracking
# Status values: required | optional | recommended | conditional | in_progress | {file-path} | skipped
workflow_status:

  # PREREQUISITE: Documentation (Required for brownfield)
  prerequisite:
    document-project:
      status: "_bmad-output/oncalls-v31-technical-documentation.md"
      agent: "analyst"
      command: "/bmad:bmm:workflows:document-project"
      purpose: "Understand existing codebase before planning"
      note: "Completed 2025-12-19 - comprehensive technical docs created"

  # PHASE 0: Discovery (Optional - User Selected)
  phase_0_discovery:
    brainstorm:
      status: "skipped"
      agent: "analyst"
      command: "/bmad:bmm:workflows:brainstorming"
      note: "Not requested by user"

    research:
      status: "_bmad-output/research-oncalls.md"
      agent: "analyst"
      command: "/bmad:bmm:workflows:research"
      purpose: "Domain and technical analysis"
      note: "Completed 2025-12-19 - domain research, competitive analysis, technical assessment"

    product-brief:
      status: "skipped"
      agent: "analyst"
      command: "/bmad:bmm:workflows:create-product-brief"
      note: "Optional for brownfield - not requested"

  # PHASE 1: Planning (Required)
  phase_1_planning:
    prd:
      status: "required"
      agent: "pm"
      command: "/bmad:bmm:workflows:create-prd"
      output: "PRD focused on new features/changes"
      note: "Must consider existing system constraints"

    create-ux-design:
      status: "conditional"
      condition: "if_has_ui"
      agent: "ux-designer"
      command: "/bmad:bmm:workflows:create-ux-design"
      note: "OnCalls has UI - likely needed"

  # PHASE 2: Solutioning (Required)
  phase_2_solutioning:
    create-architecture:
      status: "recommended"
      agent: "architect"
      command: "/bmad:bmm:workflows:create-architecture"
      output: "Integration architecture - solution design"
      note: "HIGHLY RECOMMENDED: Distills brownfield context into focused design"

    create-epics-and-stories:
      status: "required"
      agent: "pm"
      command: "/bmad:bmm:workflows:create-epics-and-stories"
      note: "Break down PRD into implementable stories"

    test-design:
      status: "recommended"
      agent: "tea"
      command: "/bmad:bmm:workflows:testarch-test-design"
      output: "System-level testability review"

    validate-architecture:
      status: "optional"
      agent: "architect"
      command: "/bmad:bmm:workflows:validate-architecture"

    implementation-readiness:
      status: "required"
      agent: "architect"
      command: "/bmad:bmm:workflows:check-implementation-readiness"
      note: "Gate check: Validates PRD + Architecture + Epics + UX"

  # PHASE 3: Implementation (Required)
  phase_3_implementation:
    sprint-planning:
      status: "required"
      agent: "sm"
      command: "/bmad:bmm:workflows:sprint-planning"
      note: "Creates sprint plan with stories"

# Next Actions
next_workflow: "create-prd"
next_agent: "pm"
next_command: "/bmad:bmm:workflows:create-prd"
next_note: "Ready to create PRD for prioritized fixes and V3 transition"

# Delta Analysis Results (2025-12-19)
delta_analysis:
  debug_server_status: "OBSOLETE - contains old buggy code"
  production_staging_sync: "IDENTICAL - both have latest fixes"
  data_fget_bug: "FIXED in prod/staging, STILL BUGGY in debug"
  last_day_month_bug: "Debug logging only - no fix implemented"
  recommendation: "Do NOT use debug server code - it's older than production"

# Project Context (from checkpoint)
project_context:
  base_repo: "/Users/jmr/dev/oncalls-main/"
  debug_repo: "/Users/jmr/dev/Oncalls-debug_prod/"
  github_remote: "jacobmr/oncalls25_react_Back"
  database_host: "db-mysql-oncalls-do-user-4885460-0.e.db.ondigitalocean.com"

# Server Infrastructure (UPDATED 2025-12-19)
servers:
  production:
    ip: "45.55.92.178"
    droplet_name: "oncallsprod"
    ssh_alias: "oncalls-direct"
    hostname: "debian-s-2vcpu-4gb-nyc3-01"
    uptime: "429+ days"
    git_status: "NO GIT - CRITICAL RISK"
    path: "/var/www/oncalls/"
    note: "LIVE production - no version control!"

  staging:
    ip: "159.203.167.125"
    droplet_name: "TempDropOncalls"
    ssh_alias: "oncalls-staging"
    hostname: "TempDropOncalls"
    uptime: "142+ days"
    git_status: "Has git"
    path: "/var/www/oncalls/current/"
    note: "Staging environment with proper git deployment"

  debug:
    ip: "159.203.131.40"
    droplet_name: "oncallsprod2025082000debug"
    ssh_alias: "N/A - use IP directly"
    hostname: "oncallsprod2025082000debug"
    uptime: "120 days"
    git_status: "53+ UNCOMMITTED CHANGES"
    path: "/var/www/debug-oncalls/"
    note: "Debug server with unsaved work - needs review!"

# Known Issues to Address (UPDATED 2025-12-19)
known_issues:
  critical:
    - "Production server (45.55.92.178) has NO git - HIGHEST RISK"
    - "Debug server (159.203.131.40) has 53+ uncommitted changes - unsaved work!"
    - "Plaintext password storage in Members.Password - HIPAA violation"
  high:
    - "9 GitHub dependency vulnerabilities - 1 critical, 3 high"
    - "Race conditions in Stripe subscription updates"
    - "Missing input validation throughout services"
  medium:
    - "Duplicate user accounts - Reported by users"
    - "UX migration incomplete"
    - "JWT secret regenerates on restart - invalidates tokens"

# Goals from checkpoint
goals:
  - "Stabilize production"
  - "Understand all server statuses"
  - "Consolidate to ONE functional repo (staging + prod branches)"
  - "Document with epics, stories, architecture"
